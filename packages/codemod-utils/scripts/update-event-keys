#!/usr/bin/env bash
set -euo pipefail

# This script updates the downloaded copy of the AG Grid component event names

# Get the output file from the first CLI argument, exiting with an error message if no argument is specified
output_path=${1:?"No output path specified"}
# Get the desired Git commit from the second CLI argument, defaulting to the latest version
version=${2:-"latest"}

# Fetch the eventKeys.ts file from the specified Git commit
file_contents="$(cd "$(dirname "$0")"; ./get-event-keys "$version")"

# Write the contents of the eventKeys.ts file to the specified output file
(
  echo "// AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY."
  echo "// Generated via \`update-event-keys\`"
  echo "//"
  echo "// @ts-nocheck"
  echo "/* eslint-disable */"
  echo "$file_contents"
) > "$output_path"

echo 1>&2 "Successfully updated event keys in $output_path"
