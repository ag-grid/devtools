#!/usr/bin/env node
"use strict";var gr=Object.defineProperty;var $r=(e,t,r)=>t in e?gr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var $e=(e,t,r)=>($r(e,typeof t!="symbol"?t+"":t,r),r);const yr=require("@ag-grid-community/codemods"),wr=require("fs"),Sr=require("constants"),Rr=require("stream"),Ir=require("util"),Or=require("assert"),ve=require("node:util"),Nr=require("node:worker_threads"),G=require("node:path"),Lr=require("node:os"),Tr=require("node:child_process"),Bt=require("node:module"),st=Symbol(),Ar={create:br,match:Qt};function Je(e,t){return{[st]:e,...t}}function Ke(e,t){return e[st]===t}function br(e){const r=Object.keys(e).map(n=>[n,Cr(n)]);return Object.fromEntries(r)}function Cr(e){return t.is=r,t;function t(n){return Je(e,n)}function r(n){return Ke(n,e)}}function Qt(e,t){return t[e[st]](e)}function Se(e){return e!=null}var Ze=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var te=Sr,Fr=process.cwd,_e=null,_r=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return _e||(_e=Fr.call(process)),_e};try{process.cwd()}catch{}if(typeof process.chdir=="function"){var Et=process.chdir;process.chdir=function(e){_e=null,Et.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Et)}var Dr=xr;function xr(e){te.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(e),e.lutimes||r(e),e.chown=s(e.chown),e.fchown=s(e.fchown),e.lchown=s(e.lchown),e.chmod=n(e.chmod),e.fchmod=n(e.fchmod),e.lchmod=n(e.lchmod),e.chownSync=u(e.chownSync),e.fchownSync=u(e.fchownSync),e.lchownSync=u(e.lchownSync),e.chmodSync=i(e.chmodSync),e.fchmodSync=i(e.fchmodSync),e.lchmodSync=i(e.lchmodSync),e.stat=f(e.stat),e.fstat=f(e.fstat),e.lstat=f(e.lstat),e.statSync=a(e.statSync),e.fstatSync=a(e.fstatSync),e.lstatSync=a(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(o,l,m){m&&process.nextTick(m)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(o,l,m,h){h&&process.nextTick(h)},e.lchownSync=function(){}),_r==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:function(o){function l(m,h,d){var R=Date.now(),S=0;o(m,h,function L(N){if(N&&(N.code==="EACCES"||N.code==="EPERM"||N.code==="EBUSY")&&Date.now()-R<6e4){setTimeout(function(){e.stat(h,function(T,D){T&&T.code==="ENOENT"?o(m,h,L):d(N)})},S),S<100&&(S+=10);return}d&&d(N)})}return Object.setPrototypeOf&&Object.setPrototypeOf(l,o),l}(e.rename)),e.read=typeof e.read!="function"?e.read:function(o){function l(m,h,d,R,S,L){var N;if(L&&typeof L=="function"){var T=0;N=function(D,V,H){if(D&&D.code==="EAGAIN"&&T<10)return T++,o.call(e,m,h,d,R,S,N);L.apply(this,arguments)}}return o.call(e,m,h,d,R,S,N)}return Object.setPrototypeOf&&Object.setPrototypeOf(l,o),l}(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:function(o){return function(l,m,h,d,R){for(var S=0;;)try{return o.call(e,l,m,h,d,R)}catch(L){if(L.code==="EAGAIN"&&S<10){S++;continue}throw L}}}(e.readSync);function t(o){o.lchmod=function(l,m,h){o.open(l,te.O_WRONLY|te.O_SYMLINK,m,function(d,R){if(d){h&&h(d);return}o.fchmod(R,m,function(S){o.close(R,function(L){h&&h(S||L)})})})},o.lchmodSync=function(l,m){var h=o.openSync(l,te.O_WRONLY|te.O_SYMLINK,m),d=!0,R;try{R=o.fchmodSync(h,m),d=!1}finally{if(d)try{o.closeSync(h)}catch{}else o.closeSync(h)}return R}}function r(o){te.hasOwnProperty("O_SYMLINK")&&o.futimes?(o.lutimes=function(l,m,h,d){o.open(l,te.O_SYMLINK,function(R,S){if(R){d&&d(R);return}o.futimes(S,m,h,function(L){o.close(S,function(N){d&&d(L||N)})})})},o.lutimesSync=function(l,m,h){var d=o.openSync(l,te.O_SYMLINK),R,S=!0;try{R=o.futimesSync(d,m,h),S=!1}finally{if(S)try{o.closeSync(d)}catch{}else o.closeSync(d)}return R}):o.futimes&&(o.lutimes=function(l,m,h,d){d&&process.nextTick(d)},o.lutimesSync=function(){})}function n(o){return o&&function(l,m,h){return o.call(e,l,m,function(d){c(d)&&(d=null),h&&h.apply(this,arguments)})}}function i(o){return o&&function(l,m){try{return o.call(e,l,m)}catch(h){if(!c(h))throw h}}}function s(o){return o&&function(l,m,h,d){return o.call(e,l,m,h,function(R){c(R)&&(R=null),d&&d.apply(this,arguments)})}}function u(o){return o&&function(l,m,h){try{return o.call(e,l,m,h)}catch(d){if(!c(d))throw d}}}function f(o){return o&&function(l,m,h){typeof m=="function"&&(h=m,m=null);function d(R,S){S&&(S.uid<0&&(S.uid+=4294967296),S.gid<0&&(S.gid+=4294967296)),h&&h.apply(this,arguments)}return m?o.call(e,l,m,d):o.call(e,l,d)}}function a(o){return o&&function(l,m){var h=m?o.call(e,l,m):o.call(e,l);return h&&(h.uid<0&&(h.uid+=4294967296),h.gid<0&&(h.gid+=4294967296)),h}}function c(o){if(!o||o.code==="ENOSYS")return!0;var l=!process.getuid||process.getuid()!==0;return!!(l&&(o.code==="EINVAL"||o.code==="EPERM"))}}var gt=Rr.Stream,Pr=jr;function jr(e){return{ReadStream:t,WriteStream:r};function t(n,i){if(!(this instanceof t))return new t(n,i);gt.call(this);var s=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var u=Object.keys(i),f=0,a=u.length;f<a;f++){var c=u[f];this[c]=i[c]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){s._read()});return}e.open(this.path,this.flags,this.mode,function(o,l){if(o){s.emit("error",o),s.readable=!1;return}s.fd=l,s.emit("open",l),s._read()})}function r(n,i){if(!(this instanceof r))return new r(n,i);gt.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var s=Object.keys(i),u=0,f=s.length;u<f;u++){var a=s[u];this[a]=i[a]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}var Gr=qr,Ur=Object.getPrototypeOf||function(e){return e.__proto__};function qr(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:Ur(e)};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}),t}var P=wr,Mr=Dr,Vr=Pr,Xr=Gr,Le=Ir,q,xe;typeof Symbol=="function"&&typeof Symbol.for=="function"?(q=Symbol.for("graceful-fs.queue"),xe=Symbol.for("graceful-fs.previous")):(q="___graceful-fs.queue",xe="___graceful-fs.previous");function Wr(){}function Kt(e,t){Object.defineProperty(e,q,{get:function(){return t}})}var oe=Wr;Le.debuglog?oe=Le.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(oe=function(){var e=Le.format.apply(Le,arguments);e="GFS4: "+e.split(/\n/).join(`
GFS4: `),console.error(e)});if(!P[q]){var Hr=Ze[q]||[];Kt(P,Hr),P.close=function(e){function t(r,n){return e.call(P,r,function(i){i||$t(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(t,xe,{value:e}),t}(P.close),P.closeSync=function(e){function t(r){e.apply(P,arguments),$t()}return Object.defineProperty(t,xe,{value:e}),t}(P.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){oe(P[q]),Or.equal(P[q].length,0)})}Ze[q]||Kt(Ze,P[q]);var Zt=ot(Xr(P));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!P.__patched&&(Zt=ot(P),P.__patched=!0);function ot(e){Mr(e),e.gracefulify=ot,e.createReadStream=V,e.createWriteStream=H;var t=e.readFile;e.readFile=r;function r(I,b,A){return typeof b=="function"&&(A=b,b=null),O(I,b,A);function O(v,p,$,g){return t(v,p,function(E){E&&(E.code==="EMFILE"||E.code==="ENFILE")?le([O,[v,p,$],E,g||Date.now(),Date.now()]):typeof $=="function"&&$.apply(this,arguments)})}}var n=e.writeFile;e.writeFile=i;function i(I,b,A,O){return typeof A=="function"&&(O=A,A=null),v(I,b,A,O);function v(p,$,g,E,y){return n(p,$,g,function(w){w&&(w.code==="EMFILE"||w.code==="ENFILE")?le([v,[p,$,g,E],w,y||Date.now(),Date.now()]):typeof E=="function"&&E.apply(this,arguments)})}}var s=e.appendFile;s&&(e.appendFile=u);function u(I,b,A,O){return typeof A=="function"&&(O=A,A=null),v(I,b,A,O);function v(p,$,g,E,y){return s(p,$,g,function(w){w&&(w.code==="EMFILE"||w.code==="ENFILE")?le([v,[p,$,g,E],w,y||Date.now(),Date.now()]):typeof E=="function"&&E.apply(this,arguments)})}}var f=e.copyFile;f&&(e.copyFile=a);function a(I,b,A,O){return typeof A=="function"&&(O=A,A=0),v(I,b,A,O);function v(p,$,g,E,y){return f(p,$,g,function(w){w&&(w.code==="EMFILE"||w.code==="ENFILE")?le([v,[p,$,g,E],w,y||Date.now(),Date.now()]):typeof E=="function"&&E.apply(this,arguments)})}}var c=e.readdir;e.readdir=l;var o=/^v[0-5]\./;function l(I,b,A){typeof b=="function"&&(A=b,b=null);var O=o.test(process.version)?function($,g,E,y){return c($,v($,g,E,y))}:function($,g,E,y){return c($,g,v($,g,E,y))};return O(I,b,A);function v(p,$,g,E){return function(y,w){y&&(y.code==="EMFILE"||y.code==="ENFILE")?le([O,[p,$,g],y,E||Date.now(),Date.now()]):(w&&w.sort&&w.sort(),typeof g=="function"&&g.call(this,y,w))}}}if(process.version.substr(0,4)==="v0.8"){var m=Vr(e);L=m.ReadStream,T=m.WriteStream}var h=e.ReadStream;h&&(L.prototype=Object.create(h.prototype),L.prototype.open=N);var d=e.WriteStream;d&&(T.prototype=Object.create(d.prototype),T.prototype.open=D),Object.defineProperty(e,"ReadStream",{get:function(){return L},set:function(I){L=I},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return T},set:function(I){T=I},enumerable:!0,configurable:!0});var R=L;Object.defineProperty(e,"FileReadStream",{get:function(){return R},set:function(I){R=I},enumerable:!0,configurable:!0});var S=T;Object.defineProperty(e,"FileWriteStream",{get:function(){return S},set:function(I){S=I},enumerable:!0,configurable:!0});function L(I,b){return this instanceof L?(h.apply(this,arguments),this):L.apply(Object.create(L.prototype),arguments)}function N(){var I=this;X(I.path,I.flags,I.mode,function(b,A){b?(I.autoClose&&I.destroy(),I.emit("error",b)):(I.fd=A,I.emit("open",A),I.read())})}function T(I,b){return this instanceof T?(d.apply(this,arguments),this):T.apply(Object.create(T.prototype),arguments)}function D(){var I=this;X(I.path,I.flags,I.mode,function(b,A){b?(I.destroy(),I.emit("error",b)):(I.fd=A,I.emit("open",A))})}function V(I,b){return new e.ReadStream(I,b)}function H(I,b){return new e.WriteStream(I,b)}var ee=e.open;e.open=X;function X(I,b,A,O){return typeof A=="function"&&(O=A,A=null),v(I,b,A,O);function v(p,$,g,E,y){return ee(p,$,g,function(w,_){w&&(w.code==="EMFILE"||w.code==="ENFILE")?le([v,[p,$,g,E],w,y||Date.now(),Date.now()]):typeof E=="function"&&E.apply(this,arguments)})}}return e}function le(e){oe("ENQUEUE",e[0].name,e[1]),P[q].push(e),at()}var Te;function $t(){for(var e=Date.now(),t=0;t<P[q].length;++t)P[q][t].length>2&&(P[q][t][3]=e,P[q][t][4]=e);at()}function at(){if(clearTimeout(Te),Te=void 0,P[q].length!==0){var e=P[q].shift(),t=e[0],r=e[1],n=e[2],i=e[3],s=e[4];if(i===void 0)oe("RETRY",t.name,r),t.apply(null,r);else if(Date.now()-i>=6e4){oe("TIMEOUT",t.name,r);var u=r.pop();typeof u=="function"&&u.call(null,n)}else{var f=Date.now()-s,a=Math.max(s-i,1),c=Math.min(a*1.2,100);f>=c?(oe("RETRY",t.name,r),t.apply(null,r.concat([i]))):P[q].push(e)}Te===void 0&&(Te=setTimeout(at,0))}}const ce=Jt(Zt),yt={readFile:ve.promisify(ce.readFile),writeFile:ve.promisify(ce.writeFile)};function kr(e=ce){return{readFile:t,readFileSync:r,writeFile:n,writeFileSync:i};function t(s,u){return yt.readFile(s,u)}function r(s,u){return e.readFileSync(s,u)}function n(s,u){return yt.writeFile(s,u)}function i(s,u){return e.writeFileSync(s,u)}}function ne(){}ne.prototype={diff:function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=n.callback;typeof n=="function"&&(i=n,n={}),this.options=n;var s=this;function u(R){return i?(setTimeout(function(){i(void 0,R)},0),!0):R}t=this.castInput(t),r=this.castInput(r),t=this.removeEmpty(this.tokenize(t)),r=this.removeEmpty(this.tokenize(r));var f=r.length,a=t.length,c=1,o=f+a;n.maxEditLength&&(o=Math.min(o,n.maxEditLength));var l=[{newPos:-1,components:[]}],m=this.extractCommon(l[0],r,t,0);if(l[0].newPos+1>=f&&m+1>=a)return u([{value:this.join(r),count:r.length}]);function h(){for(var R=-1*c;R<=c;R+=2){var S=void 0,L=l[R-1],N=l[R+1],T=(N?N.newPos:0)-R;L&&(l[R-1]=void 0);var D=L&&L.newPos+1<f,V=N&&0<=T&&T<a;if(!D&&!V){l[R]=void 0;continue}if(!D||V&&L.newPos<N.newPos?(S=zr(N),s.pushComponent(S.components,void 0,!0)):(S=L,S.newPos++,s.pushComponent(S.components,!0,void 0)),T=s.extractCommon(S,r,t,R),S.newPos+1>=f&&T+1>=a)return u(Yr(s,S.components,r,t,s.useLongestToken));l[R]=S}c++}if(i)(function R(){setTimeout(function(){if(c>o)return i();h()||R()},0)})();else for(;c<=o;){var d=h();if(d)return d}},pushComponent:function(t,r,n){var i=t[t.length-1];i&&i.added===r&&i.removed===n?t[t.length-1]={count:i.count+1,added:r,removed:n}:t.push({count:1,added:r,removed:n})},extractCommon:function(t,r,n,i){for(var s=r.length,u=n.length,f=t.newPos,a=f-i,c=0;f+1<s&&a+1<u&&this.equals(r[f+1],n[a+1]);)f++,a++,c++;return c&&t.components.push({count:c}),t.newPos=f,a},equals:function(t,r){return this.options.comparator?this.options.comparator(t,r):t===r||this.options.ignoreCase&&t.toLowerCase()===r.toLowerCase()},removeEmpty:function(t){for(var r=[],n=0;n<t.length;n++)t[n]&&r.push(t[n]);return r},castInput:function(t){return t},tokenize:function(t){return t.split("")},join:function(t){return t.join("")}};function Yr(e,t,r,n,i){for(var s=0,u=t.length,f=0,a=0;s<u;s++){var c=t[s];if(c.removed){if(c.value=e.join(n.slice(a,a+c.count)),a+=c.count,s&&t[s-1].added){var l=t[s-1];t[s-1]=t[s],t[s]=l}}else{if(!c.added&&i){var o=r.slice(f,f+c.count);o=o.map(function(h,d){var R=n[a+d];return R.length>h.length?R:h}),c.value=e.join(o)}else c.value=e.join(r.slice(f,f+c.count));f+=c.count,c.added||(a+=c.count)}}var m=t[u-1];return u>1&&typeof m.value=="string"&&(m.added||m.removed)&&e.equals("",m.value)&&(t[u-2].value+=m.value,t.pop()),t}function zr(e){return{newPos:e.newPos,components:e.components.slice(0)}}var wt=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,St=/\S/,er=new ne;er.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!St.test(e)&&!St.test(t)};er.tokenize=function(e){for(var t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),r=0;r<t.length-1;r++)!t[r+1]&&t[r+2]&&wt.test(t[r])&&wt.test(t[r+2])&&(t[r]+=t[r+2],t.splice(r+1,2),r--);return t};var ct=new ne;ct.tokenize=function(e){var t=[],r=e.split(/(\n|\r\n)/);r[r.length-1]||r.pop();for(var n=0;n<r.length;n++){var i=r[n];n%2&&!this.options.newlineIsToken?t[t.length-1]+=i:(this.options.ignoreWhitespace&&(i=i.trim()),t.push(i))}return t};function Br(e,t,r){return ct.diff(e,t,r)}var Qr=new ne;Qr.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};var Jr=new ne;Jr.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};function De(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?De=function(t){return typeof t}:De=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},De(e)}function Ve(e){return Kr(e)||Zr(e)||en(e)||tn()}function Kr(e){if(Array.isArray(e))return et(e)}function Zr(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function en(e,t){if(e){if(typeof e=="string")return et(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return et(e,t)}}function et(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function tn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var rn=Object.prototype.toString,Ie=new ne;Ie.useLongestToken=!0;Ie.tokenize=ct.tokenize;Ie.castInput=function(e){var t=this.options,r=t.undefinedReplacement,n=t.stringifyReplacer,i=n===void 0?function(s,u){return typeof u>"u"?r:u}:n;return typeof e=="string"?e:JSON.stringify(tt(e,null,null,i),i,"  ")};Ie.equals=function(e,t){return ne.prototype.equals.call(Ie,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};function tt(e,t,r,n,i){t=t||[],r=r||[],n&&(e=n(i,e));var s;for(s=0;s<t.length;s+=1)if(t[s]===e)return r[s];var u;if(rn.call(e)==="[object Array]"){for(t.push(e),u=new Array(e.length),r.push(u),s=0;s<e.length;s+=1)u[s]=tt(e[s],t,r,n,i);return t.pop(),r.pop(),u}if(e&&e.toJSON&&(e=e.toJSON()),De(e)==="object"&&e!==null){t.push(e),u={},r.push(u);var f=[],a;for(a in e)e.hasOwnProperty(a)&&f.push(a);for(f.sort(),s=0;s<f.length;s+=1)a=f[s],u[a]=tt(e[a],t,r,n,a);t.pop(),r.pop()}else u=e;return u}var rt=new ne;rt.tokenize=function(e){return e.slice()};rt.join=rt.removeEmpty=function(e){return e};function nn(e,t,r,n,i,s,u){u||(u={}),typeof u.context>"u"&&(u.context=4);var f=Br(r,n,u);if(!f)return;f.push({value:"",lines:[]});function a(L){return L.map(function(N){return" "+N})}for(var c=[],o=0,l=0,m=[],h=1,d=1,R=function(N){var T=f[N],D=T.lines||T.value.replace(/\n$/,"").split(`
`);if(T.lines=D,T.added||T.removed){var V;if(!o){var H=f[N-1];o=h,l=d,H&&(m=u.context>0?a(H.lines.slice(-u.context)):[],o-=m.length,l-=m.length)}(V=m).push.apply(V,Ve(D.map(function(p){return(T.added?"+":"-")+p}))),T.added?d+=D.length:h+=D.length}else{if(o)if(D.length<=u.context*2&&N<f.length-2){var ee;(ee=m).push.apply(ee,Ve(a(D)))}else{var X,I=Math.min(D.length,u.context);(X=m).push.apply(X,Ve(a(D.slice(0,I))));var b={oldStart:o,oldLines:h-o+I,newStart:l,newLines:d-l+I,lines:m};if(N>=f.length-2&&D.length<=u.context){var A=/\n$/.test(r),O=/\n$/.test(n),v=D.length==0&&m.length>b.oldLines;!A&&v&&r.length>0&&m.splice(b.oldLines,0,"\\ No newline at end of file"),(!A&&!v||!O)&&m.push("\\ No newline at end of file")}c.push(b),o=0,l=0,m=[]}h+=D.length,d+=D.length}},S=0;S<f.length;S++)R(S);return{oldFileName:e,newFileName:t,oldHeader:i,newHeader:s,hunks:c}}function sn(e){var t=[];e.oldFileName==e.newFileName&&t.push("Index: "+e.oldFileName),t.push("==================================================================="),t.push("--- "+e.oldFileName+(typeof e.oldHeader>"u"?"":"	"+e.oldHeader)),t.push("+++ "+e.newFileName+(typeof e.newHeader>"u"?"":"	"+e.newHeader));for(var r=0;r<e.hunks.length;r++){var n=e.hunks[r];n.oldLines===0&&(n.oldStart-=1),n.newLines===0&&(n.newStart-=1),t.push("@@ -"+n.oldStart+","+n.oldLines+" +"+n.newStart+","+n.newLines+" @@"),t.push.apply(t,n.lines)}return t.join(`
`)+`
`}function on(e,t,r,n,i,s,u){return sn(nn(e,t,r,n,i,s,u))}var nt={exports:{}};const an="2.0.0",tr=256,cn=Number.MAX_SAFE_INTEGER||9007199254740991,un=16,ln=tr-6,fn=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var je={MAX_LENGTH:tr,MAX_SAFE_COMPONENT_LENGTH:un,MAX_SAFE_BUILD_LENGTH:ln,MAX_SAFE_INTEGER:cn,RELEASE_TYPES:fn,SEMVER_SPEC_VERSION:an,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const hn=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var Ge=hn;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:i}=je,s=Ge;t=e.exports={};const u=t.re=[],f=t.safeRe=[],a=t.src=[],c=t.t={};let o=0;const l="[a-zA-Z0-9-]",m=[["\\s",1],["\\d",i],[l,n]],h=R=>{for(const[S,L]of m)R=R.split(`${S}*`).join(`${S}{0,${L}}`).split(`${S}+`).join(`${S}{1,${L}}`);return R},d=(R,S,L)=>{const N=h(S),T=o++;s(R,T,S),c[R]=T,a[T]=S,u[T]=new RegExp(S,L?"g":void 0),f[T]=new RegExp(N,L?"g":void 0)};d("NUMERICIDENTIFIER","0|[1-9]\\d*"),d("NUMERICIDENTIFIERLOOSE","\\d+"),d("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${l}*`),d("MAINVERSION",`(${a[c.NUMERICIDENTIFIER]})\\.(${a[c.NUMERICIDENTIFIER]})\\.(${a[c.NUMERICIDENTIFIER]})`),d("MAINVERSIONLOOSE",`(${a[c.NUMERICIDENTIFIERLOOSE]})\\.(${a[c.NUMERICIDENTIFIERLOOSE]})\\.(${a[c.NUMERICIDENTIFIERLOOSE]})`),d("PRERELEASEIDENTIFIER",`(?:${a[c.NUMERICIDENTIFIER]}|${a[c.NONNUMERICIDENTIFIER]})`),d("PRERELEASEIDENTIFIERLOOSE",`(?:${a[c.NUMERICIDENTIFIERLOOSE]}|${a[c.NONNUMERICIDENTIFIER]})`),d("PRERELEASE",`(?:-(${a[c.PRERELEASEIDENTIFIER]}(?:\\.${a[c.PRERELEASEIDENTIFIER]})*))`),d("PRERELEASELOOSE",`(?:-?(${a[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${a[c.PRERELEASEIDENTIFIERLOOSE]})*))`),d("BUILDIDENTIFIER",`${l}+`),d("BUILD",`(?:\\+(${a[c.BUILDIDENTIFIER]}(?:\\.${a[c.BUILDIDENTIFIER]})*))`),d("FULLPLAIN",`v?${a[c.MAINVERSION]}${a[c.PRERELEASE]}?${a[c.BUILD]}?`),d("FULL",`^${a[c.FULLPLAIN]}$`),d("LOOSEPLAIN",`[v=\\s]*${a[c.MAINVERSIONLOOSE]}${a[c.PRERELEASELOOSE]}?${a[c.BUILD]}?`),d("LOOSE",`^${a[c.LOOSEPLAIN]}$`),d("GTLT","((?:<|>)?=?)"),d("XRANGEIDENTIFIERLOOSE",`${a[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),d("XRANGEIDENTIFIER",`${a[c.NUMERICIDENTIFIER]}|x|X|\\*`),d("XRANGEPLAIN",`[v=\\s]*(${a[c.XRANGEIDENTIFIER]})(?:\\.(${a[c.XRANGEIDENTIFIER]})(?:\\.(${a[c.XRANGEIDENTIFIER]})(?:${a[c.PRERELEASE]})?${a[c.BUILD]}?)?)?`),d("XRANGEPLAINLOOSE",`[v=\\s]*(${a[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[c.XRANGEIDENTIFIERLOOSE]})(?:${a[c.PRERELEASELOOSE]})?${a[c.BUILD]}?)?)?`),d("XRANGE",`^${a[c.GTLT]}\\s*${a[c.XRANGEPLAIN]}$`),d("XRANGELOOSE",`^${a[c.GTLT]}\\s*${a[c.XRANGEPLAINLOOSE]}$`),d("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),d("COERCERTL",a[c.COERCE],!0),d("LONETILDE","(?:~>?)"),d("TILDETRIM",`(\\s*)${a[c.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",d("TILDE",`^${a[c.LONETILDE]}${a[c.XRANGEPLAIN]}$`),d("TILDELOOSE",`^${a[c.LONETILDE]}${a[c.XRANGEPLAINLOOSE]}$`),d("LONECARET","(?:\\^)"),d("CARETTRIM",`(\\s*)${a[c.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",d("CARET",`^${a[c.LONECARET]}${a[c.XRANGEPLAIN]}$`),d("CARETLOOSE",`^${a[c.LONECARET]}${a[c.XRANGEPLAINLOOSE]}$`),d("COMPARATORLOOSE",`^${a[c.GTLT]}\\s*(${a[c.LOOSEPLAIN]})$|^$`),d("COMPARATOR",`^${a[c.GTLT]}\\s*(${a[c.FULLPLAIN]})$|^$`),d("COMPARATORTRIM",`(\\s*)${a[c.GTLT]}\\s*(${a[c.LOOSEPLAIN]}|${a[c.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",d("HYPHENRANGE",`^\\s*(${a[c.XRANGEPLAIN]})\\s+-\\s+(${a[c.XRANGEPLAIN]})\\s*$`),d("HYPHENRANGELOOSE",`^\\s*(${a[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${a[c.XRANGEPLAINLOOSE]})\\s*$`),d("STAR","(<|>)?=?\\s*\\*"),d("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),d("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(nt,nt.exports);var Ne=nt.exports;const pn=Object.freeze({loose:!0}),dn=Object.freeze({}),mn=e=>e?typeof e!="object"?pn:e:dn;var ut=mn;const Rt=/^[0-9]+$/,rr=(e,t)=>{const r=Rt.test(e),n=Rt.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},vn=(e,t)=>rr(t,e);var nr={compareIdentifiers:rr,rcompareIdentifiers:vn};const Ae=Ge,{MAX_LENGTH:It,MAX_SAFE_INTEGER:be}=je,{safeRe:Ot,t:Nt}=Ne,En=ut,{compareIdentifiers:fe}=nr;let gn=class B{constructor(t,r){if(r=En(r),t instanceof B){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>It)throw new TypeError(`version is longer than ${It} characters`);Ae("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const n=t.trim().match(r.loose?Ot[Nt.LOOSE]:Ot[Nt.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>be||this.major<0)throw new TypeError("Invalid major version");if(this.minor>be||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>be||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<be)return s}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Ae("SemVer.compare",this.version,this.options,t),!(t instanceof B)){if(typeof t=="string"&&t===this.version)return 0;t=new B(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof B||(t=new B(t,this.options)),fe(this.major,t.major)||fe(this.minor,t.minor)||fe(this.patch,t.patch)}comparePre(t){if(t instanceof B||(t=new B(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{const n=this.prerelease[r],i=t.prerelease[r];if(Ae("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return fe(n,i)}while(++r)}compareBuild(t){t instanceof B||(t=new B(t,this.options));let r=0;do{const n=this.build[r],i=t.build[r];if(Ae("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return fe(n,i)}while(++r)}inc(t,r,n){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(n)?1:0;if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let s=[r,i];n===!1&&(s=[r]),fe(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var M=gn;const Lt=M,$n=(e,t,r=!1)=>{if(e instanceof Lt)return e;try{return new Lt(e,t)}catch(n){if(!r)return null;throw n}};var Ee=$n;const yn=Ee,wn=(e,t)=>{const r=yn(e,t);return r?r.version:null};var Sn=wn;const Rn=Ee,In=(e,t)=>{const r=Rn(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};var On=In;const Tt=M,Nn=(e,t,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new Tt(e instanceof Tt?e.version:e,r).inc(t,n,i).version}catch{return null}};var Ln=Nn;const At=Ee,Tn=(e,t)=>{const r=At(e,null,!0),n=At(t,null,!0),i=r.compare(n);if(i===0)return null;const s=i>0,u=s?r:n,f=s?n:r,a=!!u.prerelease.length;if(!!f.prerelease.length&&!a)return!f.patch&&!f.minor?"major":u.patch?"patch":u.minor?"minor":"major";const o=a?"pre":"";return r.major!==n.major?o+"major":r.minor!==n.minor?o+"minor":r.patch!==n.patch?o+"patch":"prerelease"};var An=Tn;const bn=M,Cn=(e,t)=>new bn(e,t).major;var Fn=Cn;const _n=M,Dn=(e,t)=>new _n(e,t).minor;var xn=Dn;const Pn=M,jn=(e,t)=>new Pn(e,t).patch;var Gn=jn;const Un=Ee,qn=(e,t)=>{const r=Un(e,t);return r&&r.prerelease.length?r.prerelease:null};var Mn=qn;const bt=M,Vn=(e,t,r)=>new bt(e,r).compare(new bt(t,r));var Y=Vn;const Xn=Y,Wn=(e,t,r)=>Xn(t,e,r);var Hn=Wn;const kn=Y,Yn=(e,t)=>kn(e,t,!0);var zn=Yn;const Ct=M,Bn=(e,t,r)=>{const n=new Ct(e,r),i=new Ct(t,r);return n.compare(i)||n.compareBuild(i)};var lt=Bn;const Qn=lt,Jn=(e,t)=>e.sort((r,n)=>Qn(r,n,t));var Kn=Jn;const Zn=lt,ei=(e,t)=>e.sort((r,n)=>Zn(n,r,t));var ti=ei;const ri=Y,ni=(e,t,r)=>ri(e,t,r)>0;var Ue=ni;const ii=Y,si=(e,t,r)=>ii(e,t,r)<0;var ft=si;const oi=Y,ai=(e,t,r)=>oi(e,t,r)===0;var ir=ai;const ci=Y,ui=(e,t,r)=>ci(e,t,r)!==0;var sr=ui;const li=Y,fi=(e,t,r)=>li(e,t,r)>=0;var ht=fi;const hi=Y,pi=(e,t,r)=>hi(e,t,r)<=0;var pt=pi;const di=ir,mi=sr,vi=Ue,Ei=ht,gi=ft,$i=pt,yi=(e,t,r,n)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return di(e,r,n);case"!=":return mi(e,r,n);case">":return vi(e,r,n);case">=":return Ei(e,r,n);case"<":return gi(e,r,n);case"<=":return $i(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};var or=yi;const wi=M,Si=Ee,{safeRe:Ce,t:Fe}=Ne,Ri=(e,t)=>{if(e instanceof wi)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(Ce[Fe.COERCE]);else{let n;for(;(n=Ce[Fe.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),Ce[Fe.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;Ce[Fe.COERCERTL].lastIndex=-1}return r===null?null:Si(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)};var Ii=Ri,Xe,Ft;function Oi(){return Ft||(Ft=1,Xe=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),Xe}var Ni=F;F.Node=ue;F.create=F;function F(e){var t=this;if(t instanceof F||(t=new F),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)t.push(arguments[r]);return t}F.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t};F.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};F.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};F.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)Ti(this,arguments[e]);return this.length};F.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)Ai(this,arguments[e]);return this.length};F.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};F.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};F.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;r!==null;n++)e.call(t,r.value,n,this),r=r.next};F.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;r!==null;n--)e.call(t,r.value,n,this),r=r.prev};F.prototype.get=function(e){for(var t=0,r=this.head;r!==null&&t<e;t++)r=r.next;if(t===e&&r!==null)return r.value};F.prototype.getReverse=function(e){for(var t=0,r=this.tail;r!==null&&t<e;t++)r=r.prev;if(t===e&&r!==null)return r.value};F.prototype.map=function(e,t){t=t||this;for(var r=new F,n=this.head;n!==null;)r.push(e.call(t,n.value,this)),n=n.next;return r};F.prototype.mapReverse=function(e,t){t=t||this;for(var r=new F,n=this.tail;n!==null;)r.push(e.call(t,n.value,this)),n=n.prev;return r};F.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)r=e(r,n.value,i),n=n.next;return r};F.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)r=e(r,n.value,i),n=n.prev;return r};F.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;r!==null;t++)e[t]=r.value,r=r.next;return e};F.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;r!==null;t++)e[t]=r.value,r=r.prev;return e};F.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new F;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=0,i=this.head;i!==null&&n<e;n++)i=i.next;for(;i!==null&&n<t;n++,i=i.next)r.push(i.value);return r};F.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new F;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=this.length,i=this.tail;i!==null&&n>t;n--)i=i.prev;for(;i!==null&&n>e;n--,i=i.prev)r.push(i.value);return r};F.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,i=this.head;i!==null&&n<e;n++)i=i.next;for(var s=[],n=0;i&&n<t;n++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<r.length;n++)i=Li(this,i,r[n]);return s};F.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};function Li(e,t,r){var n=t===e.head?new ue(r,null,t,e):new ue(r,t,t.next,e);return n.next===null&&(e.tail=n),n.prev===null&&(e.head=n),e.length++,n}function Ti(e,t){e.tail=new ue(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function Ai(e,t){e.head=new ue(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function ue(e,t,r,n){if(!(this instanceof ue))return new ue(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{Oi()(F)}catch{}const bi=Ni,ie=Symbol("max"),Z=Symbol("length"),he=Symbol("lengthCalculator"),Re=Symbol("allowStale"),se=Symbol("maxAge"),K=Symbol("dispose"),_t=Symbol("noDisposeOnSet"),U=Symbol("lruList"),k=Symbol("cache"),ar=Symbol("updateAgeOnGet"),We=()=>1;class Ci{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[ie]=t.max||1/0;const r=t.length||We;if(this[he]=typeof r!="function"?We:r,this[Re]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[se]=t.maxAge||0,this[K]=t.dispose,this[_t]=t.noDisposeOnSet||!1,this[ar]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[ie]=t||1/0,ye(this)}get max(){return this[ie]}set allowStale(t){this[Re]=!!t}get allowStale(){return this[Re]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[se]=t,ye(this)}get maxAge(){return this[se]}set lengthCalculator(t){typeof t!="function"&&(t=We),t!==this[he]&&(this[he]=t,this[Z]=0,this[U].forEach(r=>{r.length=this[he](r.value,r.key),this[Z]+=r.length})),ye(this)}get lengthCalculator(){return this[he]}get length(){return this[Z]}get itemCount(){return this[U].length}rforEach(t,r){r=r||this;for(let n=this[U].tail;n!==null;){const i=n.prev;Dt(this,t,n,r),n=i}}forEach(t,r){r=r||this;for(let n=this[U].head;n!==null;){const i=n.next;Dt(this,t,n,r),n=i}}keys(){return this[U].toArray().map(t=>t.key)}values(){return this[U].toArray().map(t=>t.value)}reset(){this[K]&&this[U]&&this[U].length&&this[U].forEach(t=>this[K](t.key,t.value)),this[k]=new Map,this[U]=new bi,this[Z]=0}dump(){return this[U].map(t=>Pe(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[U]}set(t,r,n){if(n=n||this[se],n&&typeof n!="number")throw new TypeError("maxAge must be a number");const i=n?Date.now():0,s=this[he](r,t);if(this[k].has(t)){if(s>this[ie])return de(this,this[k].get(t)),!1;const a=this[k].get(t).value;return this[K]&&(this[_t]||this[K](t,a.value)),a.now=i,a.maxAge=n,a.value=r,this[Z]+=s-a.length,a.length=s,this.get(t),ye(this),!0}const u=new Fi(t,r,s,i,n);return u.length>this[ie]?(this[K]&&this[K](t,r),!1):(this[Z]+=u.length,this[U].unshift(u),this[k].set(t,this[U].head),ye(this),!0)}has(t){if(!this[k].has(t))return!1;const r=this[k].get(t).value;return!Pe(this,r)}get(t){return He(this,t,!0)}peek(t){return He(this,t,!1)}pop(){const t=this[U].tail;return t?(de(this,t),t.value):null}del(t){de(this,this[k].get(t))}load(t){this.reset();const r=Date.now();for(let n=t.length-1;n>=0;n--){const i=t[n],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const u=s-r;u>0&&this.set(i.k,i.v,u)}}}prune(){this[k].forEach((t,r)=>He(this,r,!1))}}const He=(e,t,r)=>{const n=e[k].get(t);if(n){const i=n.value;if(Pe(e,i)){if(de(e,n),!e[Re])return}else r&&(e[ar]&&(n.value.now=Date.now()),e[U].unshiftNode(n));return i.value}},Pe=(e,t)=>{if(!t||!t.maxAge&&!e[se])return!1;const r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[se]&&r>e[se]},ye=e=>{if(e[Z]>e[ie])for(let t=e[U].tail;e[Z]>e[ie]&&t!==null;){const r=t.prev;de(e,t),t=r}},de=(e,t)=>{if(t){const r=t.value;e[K]&&e[K](r.key,r.value),e[Z]-=r.length,e[k].delete(r.key),e[U].removeNode(t)}};class Fi{constructor(t,r,n,i,s){this.key=t,this.value=r,this.length=n,this.now=i,this.maxAge=s||0}}const Dt=(e,t,r,n)=>{let i=r.value;Pe(e,i)&&(de(e,r),e[Re]||(i=void 0)),i&&t.call(n,i.value,i.key,e)};var _i=Ci,ke,xt;function z(){if(xt)return ke;xt=1;class e{constructor(p,$){if($=n($),p instanceof e)return p.loose===!!$.loose&&p.includePrerelease===!!$.includePrerelease?p:new e(p.raw,$);if(p instanceof i)return this.raw=p.value,this.set=[[p]],this.format(),this;if(this.options=$,this.loose=!!$.loose,this.includePrerelease=!!$.includePrerelease,this.raw=p.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(g=>this.parseRange(g.trim())).filter(g=>g.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const g=this.set[0];if(this.set=this.set.filter(E=>!d(E[0])),this.set.length===0)this.set=[g];else if(this.set.length>1){for(const E of this.set)if(E.length===1&&R(E[0])){this.set=[E];break}}}this.format()}format(){return this.range=this.set.map(p=>p.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(p){const g=((this.options.includePrerelease&&m)|(this.options.loose&&h))+":"+p,E=r.get(g);if(E)return E;const y=this.options.loose,w=y?f[a.HYPHENRANGELOOSE]:f[a.HYPHENRANGE];p=p.replace(w,A(this.options.includePrerelease)),s("hyphen replace",p),p=p.replace(f[a.COMPARATORTRIM],c),s("comparator trim",p),p=p.replace(f[a.TILDETRIM],o),s("tilde trim",p),p=p.replace(f[a.CARETTRIM],l),s("caret trim",p);let _=p.split(" ").map(j=>L(j,this.options)).join(" ").split(/\s+/).map(j=>b(j,this.options));y&&(_=_.filter(j=>(s("loose invalid filter",j,this.options),!!j.match(f[a.COMPARATORLOOSE])))),s("range list",_);const C=new Map,x=_.map(j=>new i(j,this.options));for(const j of x){if(d(j))return[j];C.set(j.value,j)}C.size>1&&C.has("")&&C.delete("");const W=[...C.values()];return r.set(g,W),W}intersects(p,$){if(!(p instanceof e))throw new TypeError("a Range is required");return this.set.some(g=>S(g,$)&&p.set.some(E=>S(E,$)&&g.every(y=>E.every(w=>y.intersects(w,$)))))}test(p){if(!p)return!1;if(typeof p=="string")try{p=new u(p,this.options)}catch{return!1}for(let $=0;$<this.set.length;$++)if(O(this.set[$],p,this.options))return!0;return!1}}ke=e;const t=_i,r=new t({max:1e3}),n=ut,i=qe(),s=Ge,u=M,{safeRe:f,t:a,comparatorTrimReplace:c,tildeTrimReplace:o,caretTrimReplace:l}=Ne,{FLAG_INCLUDE_PRERELEASE:m,FLAG_LOOSE:h}=je,d=v=>v.value==="<0.0.0-0",R=v=>v.value==="",S=(v,p)=>{let $=!0;const g=v.slice();let E=g.pop();for(;$&&g.length;)$=g.every(y=>E.intersects(y,p)),E=g.pop();return $},L=(v,p)=>(s("comp",v,p),v=V(v,p),s("caret",v),v=T(v,p),s("tildes",v),v=ee(v,p),s("xrange",v),v=I(v,p),s("stars",v),v),N=v=>!v||v.toLowerCase()==="x"||v==="*",T=(v,p)=>v.trim().split(/\s+/).map($=>D($,p)).join(" "),D=(v,p)=>{const $=p.loose?f[a.TILDELOOSE]:f[a.TILDE];return v.replace($,(g,E,y,w,_)=>{s("tilde",v,g,E,y,w,_);let C;return N(E)?C="":N(y)?C=`>=${E}.0.0 <${+E+1}.0.0-0`:N(w)?C=`>=${E}.${y}.0 <${E}.${+y+1}.0-0`:_?(s("replaceTilde pr",_),C=`>=${E}.${y}.${w}-${_} <${E}.${+y+1}.0-0`):C=`>=${E}.${y}.${w} <${E}.${+y+1}.0-0`,s("tilde return",C),C})},V=(v,p)=>v.trim().split(/\s+/).map($=>H($,p)).join(" "),H=(v,p)=>{s("caret",v,p);const $=p.loose?f[a.CARETLOOSE]:f[a.CARET],g=p.includePrerelease?"-0":"";return v.replace($,(E,y,w,_,C)=>{s("caret",v,E,y,w,_,C);let x;return N(y)?x="":N(w)?x=`>=${y}.0.0${g} <${+y+1}.0.0-0`:N(_)?y==="0"?x=`>=${y}.${w}.0${g} <${y}.${+w+1}.0-0`:x=`>=${y}.${w}.0${g} <${+y+1}.0.0-0`:C?(s("replaceCaret pr",C),y==="0"?w==="0"?x=`>=${y}.${w}.${_}-${C} <${y}.${w}.${+_+1}-0`:x=`>=${y}.${w}.${_}-${C} <${y}.${+w+1}.0-0`:x=`>=${y}.${w}.${_}-${C} <${+y+1}.0.0-0`):(s("no pr"),y==="0"?w==="0"?x=`>=${y}.${w}.${_}${g} <${y}.${w}.${+_+1}-0`:x=`>=${y}.${w}.${_}${g} <${y}.${+w+1}.0-0`:x=`>=${y}.${w}.${_} <${+y+1}.0.0-0`),s("caret return",x),x})},ee=(v,p)=>(s("replaceXRanges",v,p),v.split(/\s+/).map($=>X($,p)).join(" ")),X=(v,p)=>{v=v.trim();const $=p.loose?f[a.XRANGELOOSE]:f[a.XRANGE];return v.replace($,(g,E,y,w,_,C)=>{s("xRange",v,g,E,y,w,_,C);const x=N(y),W=x||N(w),j=W||N(_),ge=j;return E==="="&&ge&&(E=""),C=p.includePrerelease?"-0":"",x?E===">"||E==="<"?g="<0.0.0-0":g="*":E&&ge?(W&&(w=0),_=0,E===">"?(E=">=",W?(y=+y+1,w=0,_=0):(w=+w+1,_=0)):E==="<="&&(E="<",W?y=+y+1:w=+w+1),E==="<"&&(C="-0"),g=`${E+y}.${w}.${_}${C}`):W?g=`>=${y}.0.0${C} <${+y+1}.0.0-0`:j&&(g=`>=${y}.${w}.0${C} <${y}.${+w+1}.0-0`),s("xRange return",g),g})},I=(v,p)=>(s("replaceStars",v,p),v.trim().replace(f[a.STAR],"")),b=(v,p)=>(s("replaceGTE0",v,p),v.trim().replace(f[p.includePrerelease?a.GTE0PRE:a.GTE0],"")),A=v=>(p,$,g,E,y,w,_,C,x,W,j,ge,ta)=>(N(g)?$="":N(E)?$=`>=${g}.0.0${v?"-0":""}`:N(y)?$=`>=${g}.${E}.0${v?"-0":""}`:w?$=`>=${$}`:$=`>=${$}${v?"-0":""}`,N(x)?C="":N(W)?C=`<${+x+1}.0.0-0`:N(j)?C=`<${x}.${+W+1}.0-0`:ge?C=`<=${x}.${W}.${j}-${ge}`:v?C=`<${x}.${W}.${+j+1}-0`:C=`<=${C}`,`${$} ${C}`.trim()),O=(v,p,$)=>{for(let g=0;g<v.length;g++)if(!v[g].test(p))return!1;if(p.prerelease.length&&!$.includePrerelease){for(let g=0;g<v.length;g++)if(s(v[g].semver),v[g].semver!==i.ANY&&v[g].semver.prerelease.length>0){const E=v[g].semver;if(E.major===p.major&&E.minor===p.minor&&E.patch===p.patch)return!0}return!1}return!0};return ke}var Ye,Pt;function qe(){if(Pt)return Ye;Pt=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(o,l){if(l=r(l),o instanceof t){if(o.loose===!!l.loose)return o;o=o.value}o=o.trim().split(/\s+/).join(" "),u("comparator",o,l),this.options=l,this.loose=!!l.loose,this.parse(o),this.semver===e?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(o){const l=this.options.loose?n[i.COMPARATORLOOSE]:n[i.COMPARATOR],m=o.match(l);if(!m)throw new TypeError(`Invalid comparator: ${o}`);this.operator=m[1]!==void 0?m[1]:"",this.operator==="="&&(this.operator=""),m[2]?this.semver=new f(m[2],this.options.loose):this.semver=e}toString(){return this.value}test(o){if(u("Comparator.test",o,this.options.loose),this.semver===e||o===e)return!0;if(typeof o=="string")try{o=new f(o,this.options)}catch{return!1}return s(o,this.operator,this.semver,this.options)}intersects(o,l){if(!(o instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new a(o.value,l).test(this.value):o.operator===""?o.value===""?!0:new a(this.value,l).test(o.semver):(l=r(l),l.includePrerelease&&(this.value==="<0.0.0-0"||o.value==="<0.0.0-0")||!l.includePrerelease&&(this.value.startsWith("<0.0.0")||o.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&o.operator.startsWith(">")||this.operator.startsWith("<")&&o.operator.startsWith("<")||this.semver.version===o.semver.version&&this.operator.includes("=")&&o.operator.includes("=")||s(this.semver,"<",o.semver,l)&&this.operator.startsWith(">")&&o.operator.startsWith("<")||s(this.semver,">",o.semver,l)&&this.operator.startsWith("<")&&o.operator.startsWith(">")))}}Ye=t;const r=ut,{safeRe:n,t:i}=Ne,s=or,u=Ge,f=M,a=z();return Ye}const Di=z(),xi=(e,t,r)=>{try{t=new Di(t,r)}catch{return!1}return t.test(e)};var Me=xi;const Pi=z(),ji=(e,t)=>new Pi(e,t).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));var Gi=ji;const Ui=M,qi=z(),Mi=(e,t,r)=>{let n=null,i=null,s=null;try{s=new qi(t,r)}catch{return null}return e.forEach(u=>{s.test(u)&&(!n||i.compare(u)===-1)&&(n=u,i=new Ui(n,r))}),n};var Vi=Mi;const Xi=M,Wi=z(),Hi=(e,t,r)=>{let n=null,i=null,s=null;try{s=new Wi(t,r)}catch{return null}return e.forEach(u=>{s.test(u)&&(!n||i.compare(u)===1)&&(n=u,i=new Xi(n,r))}),n};var ki=Hi;const ze=M,Yi=z(),jt=Ue,zi=(e,t)=>{e=new Yi(e,t);let r=new ze("0.0.0");if(e.test(r)||(r=new ze("0.0.0-0"),e.test(r)))return r;r=null;for(let n=0;n<e.set.length;++n){const i=e.set[n];let s=null;i.forEach(u=>{const f=new ze(u.semver.version);switch(u.operator){case">":f.prerelease.length===0?f.patch++:f.prerelease.push(0),f.raw=f.format();case"":case">=":(!s||jt(f,s))&&(s=f);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${u.operator}`)}}),s&&(!r||jt(r,s))&&(r=s)}return r&&e.test(r)?r:null};var Bi=zi;const Qi=z(),Ji=(e,t)=>{try{return new Qi(e,t).range||"*"}catch{return null}};var Ki=Ji;const Zi=M,cr=qe(),{ANY:es}=cr,ts=z(),rs=Me,Gt=Ue,Ut=ft,ns=pt,is=ht,ss=(e,t,r,n)=>{e=new Zi(e,n),t=new ts(t,n);let i,s,u,f,a;switch(r){case">":i=Gt,s=ns,u=Ut,f=">",a=">=";break;case"<":i=Ut,s=is,u=Gt,f="<",a="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(rs(e,t,n))return!1;for(let c=0;c<t.set.length;++c){const o=t.set[c];let l=null,m=null;if(o.forEach(h=>{h.semver===es&&(h=new cr(">=0.0.0")),l=l||h,m=m||h,i(h.semver,l.semver,n)?l=h:u(h.semver,m.semver,n)&&(m=h)}),l.operator===f||l.operator===a||(!m.operator||m.operator===f)&&s(e,m.semver))return!1;if(m.operator===a&&u(e,m.semver))return!1}return!0};var dt=ss;const os=dt,as=(e,t,r)=>os(e,t,">",r);var cs=as;const us=dt,ls=(e,t,r)=>us(e,t,"<",r);var fs=ls;const qt=z(),hs=(e,t,r)=>(e=new qt(e,r),t=new qt(t,r),e.intersects(t,r));var ps=hs;const ds=Me,ms=Y;var vs=(e,t,r)=>{const n=[];let i=null,s=null;const u=e.sort((o,l)=>ms(o,l,r));for(const o of u)ds(o,t,r)?(s=o,i||(i=o)):(s&&n.push([i,s]),s=null,i=null);i&&n.push([i,null]);const f=[];for(const[o,l]of n)o===l?f.push(o):!l&&o===u[0]?f.push("*"):l?o===u[0]?f.push(`<=${l}`):f.push(`${o} - ${l}`):f.push(`>=${o}`);const a=f.join(" || "),c=typeof t.raw=="string"?t.raw:String(t);return a.length<c.length?a:t};const Mt=z(),mt=qe(),{ANY:Be}=mt,we=Me,vt=Y,Es=(e,t,r={})=>{if(e===t)return!0;e=new Mt(e,r),t=new Mt(t,r);let n=!1;e:for(const i of e.set){for(const s of t.set){const u=$s(i,s,r);if(n=n||u!==null,u)continue e}if(n)return!1}return!0},gs=[new mt(">=0.0.0-0")],Vt=[new mt(">=0.0.0")],$s=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===Be){if(t.length===1&&t[0].semver===Be)return!0;r.includePrerelease?e=gs:e=Vt}if(t.length===1&&t[0].semver===Be){if(r.includePrerelease)return!0;t=Vt}const n=new Set;let i,s;for(const h of e)h.operator===">"||h.operator===">="?i=Xt(i,h,r):h.operator==="<"||h.operator==="<="?s=Wt(s,h,r):n.add(h.semver);if(n.size>1)return null;let u;if(i&&s){if(u=vt(i.semver,s.semver,r),u>0)return null;if(u===0&&(i.operator!==">="||s.operator!=="<="))return null}for(const h of n){if(i&&!we(h,String(i),r)||s&&!we(h,String(s),r))return null;for(const d of t)if(!we(h,String(d),r))return!1;return!0}let f,a,c,o,l=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,m=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;l&&l.prerelease.length===1&&s.operator==="<"&&l.prerelease[0]===0&&(l=!1);for(const h of t){if(o=o||h.operator===">"||h.operator===">=",c=c||h.operator==="<"||h.operator==="<=",i){if(m&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===m.major&&h.semver.minor===m.minor&&h.semver.patch===m.patch&&(m=!1),h.operator===">"||h.operator===">="){if(f=Xt(i,h,r),f===h&&f!==i)return!1}else if(i.operator===">="&&!we(i.semver,String(h),r))return!1}if(s){if(l&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===l.major&&h.semver.minor===l.minor&&h.semver.patch===l.patch&&(l=!1),h.operator==="<"||h.operator==="<="){if(a=Wt(s,h,r),a===h&&a!==s)return!1}else if(s.operator==="<="&&!we(s.semver,String(h),r))return!1}if(!h.operator&&(s||i)&&u!==0)return!1}return!(i&&c&&!s&&u!==0||s&&o&&!i&&u!==0||m||l)},Xt=(e,t,r)=>{if(!e)return t;const n=vt(e.semver,t.semver,r);return n>0?e:n<0||t.operator===">"&&e.operator===">="?t:e},Wt=(e,t,r)=>{if(!e)return t;const n=vt(e.semver,t.semver,r);return n<0?e:n>0||t.operator==="<"&&e.operator==="<="?t:e};var ys=Es;const Qe=Ne,Ht=je,ws=M,kt=nr,Ss=Ee,Rs=Sn,Is=On,Os=Ln,Ns=An,Ls=Fn,Ts=xn,As=Gn,bs=Mn,Cs=Y,Fs=Hn,_s=zn,Ds=lt,xs=Kn,Ps=ti,js=Ue,Gs=ft,Us=ir,qs=sr,Ms=ht,Vs=pt,Xs=or,Ws=Ii,Hs=qe(),ks=z(),Ys=Me,zs=Gi,Bs=Vi,Qs=ki,Js=Bi,Ks=Ki,Zs=dt,eo=cs,to=fs,ro=ps,no=vs,io=ys;var so={parse:Ss,valid:Rs,clean:Is,inc:Os,diff:Ns,major:Ls,minor:Ts,patch:As,prerelease:bs,compare:Cs,rcompare:Fs,compareLoose:_s,compareBuild:Ds,sort:xs,rsort:Ps,gt:js,lt:Gs,eq:Us,neq:qs,gte:Ms,lte:Vs,cmp:Xs,coerce:Ws,Comparator:Hs,Range:ks,satisfies:Ys,toComparators:zs,maxSatisfying:Bs,minSatisfying:Qs,minVersion:Js,validRange:Ks,outside:Zs,gtr:eo,ltr:to,intersects:ro,simplifyRange:no,subset:io,SemVer:ws,re:Qe.re,src:Qe.src,tokens:Qe.t,SEMVER_SPEC_VERSION:Ht.SEMVER_SPEC_VERSION,RELEASE_TYPES:Ht.RELEASE_TYPES,compareIdentifiers:kt.compareIdentifiers,rcompareIdentifiers:kt.rcompareIdentifiers};const Yt=Jt(so);function Q(e,t){return new Promise((r,n)=>e.write(`${t}
`,i=>{i?n(i):r()}))}function oo(e,t){const r=e instanceof re?e.toString():e instanceof Error?e.stack||e.message:String(e);return ao(r,t)}function ao(e,t){const{indent:r}=t;return r+e.replace(/\n/g,`
`+r)}function ae(e,t){return ur("32",e,t)}function co(e,t){return ur("31",e,t)}function ur(e,t,r){return r.NO_COLOR&&r.NO_COLOR!=="0"?t:`\x1B[${e}m${t}\x1B[0m`}class re extends Error{constructor(r,n){super(r);$e(this,"info");this.name="CliError",this.info=n}toString(r){return`${r?co("Error",r):"Error"}: ${this.message}

${this.info}`}}class J extends re{constructor(t,r){super(t,r),this.name="CliArgsError"}}const uo=ve.promisify(ce.readdir);ve.promisify(ce.readFile);ve.promisify(ce.writeFile);const lr=ve.promisify(ce.stat);function lo(e,t){return e instanceof Error&&e.code===t}async function fr(e,t){const r=await uo(e);return Promise.all(r.map(n=>lr(G.join(e,n)).then(i=>{const s=G.join(e,n);return t(s,i)?i.isDirectory()?fr(s,t).then(u=>u.map(f=>G.join(n,f))):[n]:[]}))).then(n=>n.flat())}async function hr(e,t,r){const n=G.join(e,t),i=await(async()=>{try{return await lr(n)}catch(f){if(lo(f,"ENOENT"))return null;throw f}})();if(i)return!r||r(n,i)?e:null;const{dir:s,root:u}=G.parse(e);return e===u?null:hr(s,t,r)}function pr(e,t,r){return new Promise((n,i)=>{const s=Tr.spawn(e,t,{stdio:["ignore","pipe","pipe"],...r}),u=[],f=[];s.stdout.on("data",a=>u.push(a)),s.stderr.on("data",a=>f.push(a)),s.on("error",i),s.on("close",a=>{a===0?n({stdout:Buffer.concat(u).toString("utf8"),stderr:Buffer.concat(f).toString("utf8")}):i(new Error(`Command "${e} ${t.join(" ")}" exited with code ${a}`))})})}const fo=/^\s*([^ ]+)\s*(.*)$/;async function ho(e){return hr(e,".git",(t,r)=>r.isDirectory())}async function po(e,t){const{gitRepository:r}=t,{stdout:n}=await pr("git",["ls-files","--exclude-standard","--",...e],{cwd:r});return n.split(`
`).filter(s=>s.length>0)}async function mo(e){const{stdout:t}=await pr("git",["status","--porcelain","--untracked-files=no"],{cwd:e});return t.split(`
`).filter(r=>r.length>0).map(r=>{const n=r.match(fo);return n?n[2]:null}).filter(Se)}const vo="@ag-grid-community/cli",Eo="31.0.0",go="MIT",$o="AG Grid developer toolkit",yo="AG Grid <info@ag-grid.com>",wo={type:"git",url:"https://github.com/ag-grid/devtools.git"},So="module",Ro="./index.ts",Io={build:"pnpm run build:lib && pnpm run build:codemods && pnpm run build:pkg","build:lib":"vite build","build:codemods":"vite build --config codemods.vite.config.js","build:pkg":"pnpm run --filter build-tools pkg $PWD $PWD/dist/package.json",lint:"pnpm run '/^lint:.*/'","lint:eslint":"eslint --ext js,cjs,mjs,ts .","lint:typescript":"tsc --noEmit",test:"vitest run","test:watch":"vitest watch",version:`node -p -e "require('./package.json').version"`,publish:"npm publish ./dist --access public"},Oo={main:"./index.js",bin:"./index.js"},No=["@ag-grid-community/codemods"],Lo={"@ag-grid-community/codemods":"workspace:*"},To={"@ag-grid-devtools/build-config":"workspace:*","@ag-grid-devtools/types":"workspace:*","@ag-grid-devtools/utils":"workspace:*","@ag-grid-devtools/worker-utils":"workspace:*","@types/diff":"5.0.8","@types/graceful-fs":"4.1.9","@types/semver":"7.5.6",diff:"5.1.0","graceful-fs":"4.2.11",semver:"7.5.4"},Ao={eslint:"^8",typedoc:"^0.25",typescript:"^5",vite:"^4",vitest:"^0.34"},bo={private:!0,name:vo,version:Eo,license:go,description:$o,author:yo,repository:wo,type:So,main:Ro,scripts:Io,pkg:Oo,bundleDependencies:No,dependencies:Lo,devDependencies:To,peerDependencies:Ao},{name:Co,version:Fo}=bo;function _o(){return Co}function Do(){return Fo.replace(/^(\d+\.\d+).+$/,"$1")}function dr(){return`npx ${_o()}@${Do()}`}const me={Idle:Object.assign(e=>Je(0,e),{is:e=>Ke(e,0)}),Running:Object.assign(e=>Je(1,e),{is:e=>Ke(e,1)})};class xo{constructor(t){$e(this,"workers");$e(this,"queue",[]);$e(this,"terminated",!1);this.workers=t.map(r=>({worker:r,state:me.Idle({})}))}run(t,r){if(this.terminated)throw new Error("This worker pool has been terminated");const{onQueue:n=void 0,onStart:i=void 0,onSuccess:s=void 0,onError:u=void 0,onComplete:f=void 0}=r||{},a=Date.now(),c=this.workers.map(l=>me.Idle.is(l.state)?l:null).find(Se),o={onQueue:n,onStart:i,onSuccess:s,onError:u,onComplete:f};return(c?Po(c,t,a,o,this.queue):jo(t,a,o,this.queue)).then(l=>{if(l.success)return l.value;throw l.error})}terminate(){if(!this.terminated){this.terminated=!0;for(const t of this.queue){const{resolver:r,onError:n,onComplete:i,queuedTime:s}=t;if(n||i){const u=Date.now(),a={queuedAt:s,startTime:u,endTime:u,runningTime:0,totalTime:0};n&&n(a),i&&i({success:!1,...a})}r&&r.reject(new Error("Worker terminated"))}for(const t of this.workers)t.state=me.Idle({}),t.worker.terminate()}}}function Po(e,t,r,n,i){const s=r;return e.state=me.Running({input:t,resolver:void 0,queuedTime:r,startTime:s,onSuccess:n.onSuccess,onError:n.onError,onComplete:n.onComplete}),n.onStart&&n.onStart({queuedAt:r,startedAt:s}),mr(e,t,r,s,n,i)}function jo(e,t,r,n){let i;const s=new Promise((o,l)=>{i={resolve:o,reject:l}});r.onQueue&&r.onQueue({queuedAt:t});const{onStart:u,onSuccess:f,onError:a,onComplete:c}=r;return n.push({input:e,queuedTime:t,resolver:i,onStart:u,onSuccess:f,onError:a,onComplete:c}),s}function mr(e,t,r,n,i,s){const{onSuccess:u,onError:f,onComplete:a}=i;return Go(e.worker,t).then(c=>({success:!0,value:c}),c=>({success:!1,error:c})).then(c=>{const o=Date.now(),l={queuedAt:r,startTime:n,endTime:o,runningTime:o-n,totalTime:o-r};return c.success?{success:!0,value:c.value,stats:l}:{success:!1,error:c.error,stats:l}}).then(c=>{const o=s.shift();if(o){const{input:m,queuedTime:h,resolver:d,onStart:R,onSuccess:S,onError:L,onComplete:N}=o,T=Date.now();e.state=me.Running({input:m,resolver:d,queuedTime:h,startTime:T,onSuccess:S,onError:L,onComplete:N});const V=mr(e,m,h,T,{onSuccess:S,onError:L,onComplete:N},s);d&&V.then(d.resolve,d.reject),l(),R&&R({queuedAt:h,startedAt:T})}else e.state=me.Idle({}),l();return c;function l(){!c.success&&f&&f(c.stats),c.success&&u&&u(c.stats),a&&a({success:c.success,...c.stats})}})}function Go(e,t){return new Promise((r,n)=>{e.on("message",i),e.on("error",s),e.on("exit",u),e.postMessage(t);function i(f){e.off("message",i),e.off("error",s),e.off("exit",u),r(f)}function s(f){e.off("message",i),e.off("error",s),e.off("exit",u),n(f)}function u(f){e.off("message",i),e.off("error",s),e.off("exit",u),n(new Error(`Worker exited with code ${f}`))}})}function Uo(e,t){return Bt.createRequire(t.url)(e)}function qo(e,t){return Bt.createRequire(t.url).resolve(e)}function Mo(e){return{run(t,r){const{fs:n}=r,{readFile:i,writeFile:s}=n,{inputFilePath:u,dryRun:f,applyDangerousEdits:a}=t;return i(u,"utf-8").catch(c=>Promise.reject(Vo("ENOENT",c)?new Error(`File not found: ${u}`):c)).then(c=>{const{source:o,errors:l}=e({path:u,source:c},{applyDangerousEdits:a,fs:n}),m=o===c,h={source:c,updated:m?null:o};return f||!o||m?{result:h,errors:l}:s(u,o).then(()=>({result:h,errors:l}))})}}}function Vo(e,t){return e instanceof Error&&e.code===t}const{versions:Oe}=yr,vr=[".cjs",".js",".mjs",".jsx",".ts",".tsx",".vue"],it=Oe[Oe.length-1].version;function pe(e){return`Usage: ${dr()} migrate [options] [<file>...]

Upgrade project source files to ensure compatibility with a specific AG Grid version

Options:
  Optional arguments:
    --to=<version>            AG Grid semver version to migrate to (defaults to ${ae(it,e)})
    --from=<version>          AG Grid semver version to migrate from
    --allow-untracked, -u     Allow operating on files outside a git repository
    --allow-dirty, -d         Allow operating on repositories with uncommitted changes in the working tree
    --apply-dangerous-edits   Automatically apply fixes that potentially change application behavior
    --num-threads             Number of worker threads to spawn (defaults to the number of system cores)
    --dry-run                 Show a diff output of the changes that would be made

  Additional arguments:
    [<file>...]               List of input files to operate on (defaults to all source files in the current working directory)

  Other options:
    --verbose, -v             Show additional log output
    --help, -h                Show usage instructions
`}function Xo(e,t){const r={from:"",to:it,allowUntracked:!1,allowDirty:!1,applyDangerousEdits:!1,numThreads:void 0,dryRun:!1,verbose:!1,help:!1,input:[]};let n;for(;n=e.shift();){if(n.includes("=")){const[i]=n.split("=",1);e.unshift(n.slice(i.length+1)),n=i}switch(n){case"--from":{const i=e.shift();if(!i||i.startsWith("-"))throw new J(`Missing value for ${n}`,pe(t));if(!Yt.valid(i))throw new J(`Invalid ${n} migration starting version`,"Must be a valid semver version");r.from=i;break}case"--to":{const i=e.shift();if(!i||i.startsWith("-"))throw new J(`Missing value for ${n}`,pe(t));if(!Oe.some(({version:s})=>s===i))throw new J(`Invalid ${n} migration target version`,`Supported versions:

${Oe.map(({version:s})=>s).map(s=>` - ${ae(s,t)}${s===it?" (default)":""}`).join(`
`)}
`);r.to=i;break}case"--allow-untracked":case"-u":r.allowUntracked=!0;break;case"--allow-dirty":case"-d":r.allowDirty=!0;break;case"--allow-dangerous-edits":r.applyDangerousEdits=!0;break;case"--num-threads":{const i=e.shift();if(!i||i.startsWith("-"))throw new J(`Missing value for ${n}`,pe(t));const s=Number(i);if(isNaN(s)||s<0)throw new J(`Invalid value for ${n}: ${i}`,pe(t));r.numThreads=s;break}case"--dry-run":r.dryRun=!0;break;case"--verbose":r.verbose=!0;break;case"--help":case"-h":r.help=!0;break;default:if(n.startsWith("-"))throw new J(`Unexpected argument: ${n}`,pe(t));r.input.push(n);break}}if(r.help)return r;if(r.from&&Yt.gte(r.from,r.to))throw new J(`Invalid --from migration starting version: ${ae(r.from,t)}`,`Migration starting version must be less than target version (${ae(r.to,t)})`);return r}async function Wo(e,t){const{env:r,stdio:n}=t,{stdout:i}=n;if(e.help)return Ho(i,r);await ko(e,t)}function Ho(e,t){return Q(e,pe(t))}async function ko(e,t){const{from:r,to:n,allowUntracked:i,allowDirty:s,applyDangerousEdits:u,numThreads:f,dryRun:a,verbose:c,input:o}=e,{cwd:l,env:m,stdio:h}=t,{stdout:d,stderr:R}=h,S=await ho(l);if(!i&&!S)throw new re("No git repository found","To run this command outside a git repository, use the --allow-untracked option");const L=S?(await zo(S)).map(O=>G.resolve(S,O)):null,N=o.length>0?o.map(O=>G.resolve(l,O)):(await Yo(l)).map(O=>G.resolve(l,O));if(!i){const O=L?new Set(L):null,v=O?N.filter(p=>!O.has(p)):N;if(v.length>0)throw new re("Untracked input files",["The following files are not tracked within the current git repository:",v.map(p=>` ${G.relative(l,p)}`).join(`
`),"To operate on untracked files, use the --allow-untracked option"].join(`

`))}if(S&&!s){const O=new Set(N),v=(await mo(S)).map(p=>G.resolve(S,p)).filter(p=>O.has(p));if(v.length>0)throw new re("Uncommitted changes",["The following files within the current git repository have uncommitted changes:",v.map(p=>` ${G.relative(l,p)}`).join(`
`),"To operate on repositories containing uncommitted changes, use the --allow-dirty option"].join(`

`))}const T=Oe.find(({version:O})=>O===n);if(!T)throw new re(`Unknown version: ${ae(n,m)}`);await Q(R,`Migrating${r?` from version ${ae(r,m)}`:""} to version ${ae(n,m)}...`);const D=Date.now(),H=await(f===0?(()=>{const O=Uo(G.join("@ag-grid-community/codemods",T.codemodPath),{url:typeof document>"u"?require("url").pathToFileURL(__filename).href:document.currentScript&&document.currentScript.src||new URL("index.cjs",document.baseURI).href}),v=Mo(O),p={fs:kr()};return Promise.all(N.map($=>v.run({inputFilePath:$,dryRun:a,applyDangerousEdits:u},p).then(({result:g,errors:E})=>({path:$,result:g,errors:E})).catch(g=>({path:$,result:{source:null,updated:null},errors:[g]}))))})():(()=>{const O=qo(G.join("@ag-grid-community/codemods",T.workerPath),{url:typeof document>"u"?require("url").pathToFileURL(__filename).href:document.currentScript&&document.currentScript.src||new URL("index.cjs",document.baseURI).href}),v=f||Lr.cpus().length,p=Array.from({length:v},()=>new Nr.Worker(O)),$=new xo(p);return Promise.all(N.map(g=>$.run({inputFilePath:g,dryRun:a,applyDangerousEdits:u},{onQueue:c?()=>{Q(R,`Queueing ${G.relative(l,g)}`)}:void 0,onStart:()=>{Q(R,`Processing ${G.relative(l,g)}`)},onComplete:c?({runningTime:E})=>{Q(R,`Processed ${G.relative(l,g)} in ${E}ms`)}:void 0}).then(E=>{if(E.success)return E.value;throw E.error}).then(({result:E,errors:y})=>({path:g,result:E,errors:y})).catch(E=>({path:g,result:{source:null,updated:null},errors:[E]})))).then(g=>($.terminate(),g))})()),ee=Date.now()-D,X=H.map(O=>O.errors.length===0?O:null).filter(Se),I=H.map(O=>O.errors.length>0?O:null).filter(Se),b=X.filter(O=>O.result.updated),A=X.filter(O=>!O.result.updated);if(a){const O=X.map(v=>{const{path:p,result:{source:$,updated:g}}=v;if(!$||!g)return null;const E=G.relative(l,p),y={path:`a/${E}`,source:$},w={path:`b/${E}`,source:g};return Qo(y,w)}).filter(Se);if(O.length>0){const v=O.join(`

`);await Q(d,v)}}if(await Q(R,`Migration completed in ${ee}ms (${b.length} modified, ${A.length} unmodified, ${I.length} failed, ${H.length} total)`),I.length>0)throw await Q(R,""),new re(`Failed to process ${I.length} ${I.length===1?"file":"files"}`,I.map(({path:O,errors:v})=>`${G.relative(l,O)}:

${v.map(p=>oo(p.message,{indent:"  "})).join(`

`)}
`).join(`
`));return X.map(({path:O})=>O)}function Yo(e){return fr(e,(t,r)=>r.isDirectory()&&G.basename(t)!=="node_modules"||r.isFile()&&Bo(t))}function zo(e){return po(vr.map(t=>`*${t}`),{gitRepository:e})}function Bo(e){return vr.includes(G.extname(e))}function Qo(e,t){return on(e.path,t.path,e.source,t.source,void 0,void 0,{context:3})}const Jo=Ar.create({Migrate:!0});function Er(e){return`
Usage: ${dr()} [command] [options]

AG Grid developer toolkit

Commands:
  migrate         Migrate project source files for an upgraded AG Grid version

Options:
  --version, -v   Print the version of the command-line tool
  --help, -h      Show usage instructions for the specified command

See individual command help for more options
`}async function Ko(e,t){const{env:r,stdio:n}=t,{stdout:i}=n,s=Zo(e,r);if(s&&s.help){await zt(i);return}if(s&&s.version){await ea(i);return}if(!s||!s.command)throw await zt(i),null;await Qt(s.command,{Migrate:({args:f})=>Wo(f,t)})}function Zo(e,t){const r={command:null,version:!1,help:!1};for(;e.length>0;){const n=e.shift();switch(n){case"--version":case"-v":r.version=!0;break;case"--help":case"-h":r.help=!0;break;case"migrate":{r.command=Jo.Migrate({args:Xo(e,t)});break}default:throw new J(`Unexpected argument: ${n}`,Er())}}return r}function zt(e,t){return Q(e,Er())}function ea(e){return Q(e,require("./package.json").version)}Ko(process.argv.slice(2),{cwd:process.cwd(),env:process.env,stdio:{stdin:process.stdin,stdout:process.stdout,stderr:process.stderr}}).catch(e=>{if(e)if(e instanceof re)process.stderr.write(`${e.toString(process.env)}
`,()=>{process.exit(1)});else{if(e instanceof Error)throw e;process.stderr.write(`${String(e)}
`,()=>{process.exit(1)})}else process.exit(1)});
